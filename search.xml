<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[javaÁ∫øÁ®ãÈÄö‰ø°]]></title>
    <url>%2F2018%2F08%2F26%2Fjava%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1%2F</url>
    <content type="text"><![CDATA[[TOC] ËøôÊòØJavaÁ∫øÁ®ãÊäÄÊúØÁöÑÁ¨¨‰∫åÁØáÔºå‰∏ªË¶ÅËÆ≤Ëß£javaÁ∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°Âíå‰∫§‰∫í. Á¨¨‰∏ÄÁØáËØ¶ËßÅ JavaÁ∫øÁ®ãÂü∫Á°Ä Á≠âÂæÖÈÄöÁü• wait notify‚Äã ÊÉ≥Ë¶ÅÂÆûÁé∞‰∏Ä‰∏™ËøôÊ†∑ÁöÑÈúÄÊ±ÇÔºö‰∏Ä‰∏™Á∫øÁ®ã‰øÆÊîπ‰∫Ü‰∏Ä‰∏™ÂØπË±°ÁöÑÂÄºÔºåËÄåÂè¶‰∏Ä‰∏™Á∫øÁ®ãÊÑüÁü•Âà∞‰∫ÜÂèòÂåñÔºåÁÑ∂ÂêéËøõË°åÁõ∏Â∫îÁöÑÊìç‰Ωú„ÄÇÁ±ª‰ºº‰∫éÊ∂àË¥πËÄÖÂíåÁîü‰∫ßËÄÖÁöÑÊ¶ÇÂøµÔºåÂè™ÊòØÂØπË±°ÊòØ‰∏§‰∏™Á∫øÁ®ã„ÄÇËøôÊó∂ÂÄôÔºåÁÆÄÂçïÁöÑÊìç‰ΩúÔºåÊòØÂè¶‰∏Ä‰∏™Á∫øÁ®ã‰∏ÄÁõ¥‰∏çÊñ≠ÁöÑÂæ™ÁéØÁõëÂê¨‰∏Ä‰∏™ÂèòÈáèÔºåÂΩìÂèòÈáèÂ¶ÇÊûúËøõË°åÊîπÂèòÔºåÂÜçËøõË°åÁõ∏Â∫îÁöÑÊìç‰Ωú„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÈááÁî®ËøôÁßçÂÅöÊ≥ïÔºå‰ºöÂ≠òÂú®‰∏§‰∏™ÊØîËæÉÊòéÊòæÁöÑÈóÆÈ¢òÔºö1.ÂºÄÈîÄËøáÂ§ßÔºåÁõëÂê¨Á∫øÁ®ã‰∏çÊñ≠ËøõË°åÂà∑Êñ∞Âà§Êñ≠Ôºå‰ΩÜÊòØÂü∫Êú¨‰∏äÈÉΩÊòØÊó†ÊïàÁöÑ‚ÄúÂ∞ùËØï‚ÄùÔºå‰∏∫‰∫ÜÈò≤Ê≠¢ËøáÂø´Âà∑Êñ∞ÔºåÂèØÈááÁî®Áù°Áú†ÁöÑÊñπÂºèÔºå‰ΩÜÂèàÂØºËá¥‰∫ÜÁ¨¨‰∫å‰∏™ÈóÆÈ¢òÔºõ2ÔºåÈöæ‰ª•Á°Æ‰øùÂèäÊó∂ÊÄßÔºåÂú®Áù°Áú†ÊòØÔºåÂü∫Êú¨‰∏ä‰∏çÊ∂àËÄóÊÄßËÉΩÔºå‰ΩÜÊòØÁù°Áú†ÊúüÈó¥ÔºåÈöæ‰ª•ÂèäÊó∂ÁöÑÂèëÁé∞Êù°‰ª∂Â∑≤Áªè‰øÆÊîπ„ÄÇ ‚Äã Java‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü wait/notifyÊñπÊ≥ïÔºåÂæà‰ºòÈõÖÁöÑËß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇÊåáÁöÑÊòØÔºå‚ºÄ‰∏™Á∫øÁ®ãAË∞É‚Ω§‰∫ÜÂØπË±°OÁöÑwait()‚ΩÖÊ≥ïËøõ‚ºä Á≠âÂæÖÁä∂ÊÄÅÔºå‚ΩΩÂè¶‚ºÄ‰∏™Á∫øÁ®ãBË∞É‚Ω§‰∫ÜÂØπË±°OÁöÑnotify()ÊàñËÄÖnotifyAll()‚ΩÖ Ê≥ïÔºåÁ∫øÁ®ãAÊî∂Âà∞ÈÄöÁü•Âêé‰ªéÂØπË±°OÁöÑwait()‚ΩÖÊ≥ïËøîÂõûÔºåËøõ‚ΩΩÊâß‚æèÂêéÁª≠Êìç‰Ωú„ÄÇ‰∏äËø∞‰∏§‰∏™Á∫øÁ®ãÈÄöËøáÂØπË±°OÊù•ÂÆåÊàê‰∫§‰∫íÔºå‚ΩΩÂØπË±°‰∏äÁöÑwait()Âíå notify()/notifyAll()ÁöÑÂÖ≥Á≥ªÂ∞±Â¶ÇÂêåÂºÄÂÖ≥‰ø°Âè∑‚ºÄÊ†∑Ôºå‚Ω§Êù•ÂÆåÊàêÁ≠âÂæÖ‚ΩÖÂíåÈÄö Áü•‚ΩÖ‰πãÈó¥ÁöÑ‰∫§‰∫í‚ºØ‰Ωú„ÄÇ ‚Äã wait(),notify()ÂíånotifyAll()ÁöÑÊñπÊ≥ïÂùáÊòØObjectÁ±ªÁöÑÂÜÖÁΩÆÊñπÊ≥ïÔºå‰ªª‰ΩïÁöÑJavaÂØπË±°ÂùáÂÖ∑ÊúâËøô‰∫õÊñπÊ≥ï„ÄÇ ‚Äã Êúâ‰∏§‰∏™ÁªÜËäÇÈúÄË¶ÅÊ≥®ÊÑèÔºö waitÂíånotifyÂøÖÈ°ªÈÖçÂêàsynchronized‰ΩøÁî® waitÊñπÊ≥ïÈáäÊîæÈîÅÔºå‰ΩÜÊòØnotifyÊñπÊ≥ï‰∏çÈáäÊîæÈîÅ ÁªèÂÖ∏Ê®°Âûã Á≠âÂæÖÊñπ ÂÖàÊâßË°å Ëé∑ÂèñÂØπË±°ÁöÑÈîÅ Êù°‰ª∂‰∏çÊª°Ë∂≥Ôºåwait(),Ë¢´ÈÄöÁü•Âêé‰ªçÁÑ∂Ê£ÄÊü•Êù°‰ª∂ Êù°‰ª∂Êª°Ë∂≥ÊâßË°å‰πãÂêéÁöÑÈÄªËæë 123456sychronized(lock)&#123; while(Êù°‰ª∂‰∏çÊª°Ë∂≥)&#123; lock.wait(); &#125; ÂêéÁª≠Â§ÑÁêÜÈÄªËæë&#125; ÈÄöÁü•Êñπ ÂêéÊâßË°å Ëé∑ÂèñÂØπË±°ÁöÑÈîÅ ÊîπÂèòÊù°‰ª∂ ÈÄöÁü•Á≠âÂæÖÂú®ÂØπË±°‰∏äÁöÑÁ∫øÁ®ã notifyAll() 12345sychronized(lock)&#123; xxxÊâßË°åËá™Â∑±ÁöÑÈÄªËæë ÊîπÂèòÊù°‰ª∂ lock.notifyAll()&#125; ÂÆû‰æã‰ª£Á†Å Á≠âÂæÖÊñπÔºö 123456789101112131415161718192021class Wait implements Runnable &#123; @Override public void run() &#123; //flag‰∏∫falseÊó∂ÔºåÊâßË°å‰ªªÂä° synchronized (lock) &#123; while (flag) &#123; try &#123; System.out.println(Thread.currentThread() + "flag is true,wait:" + new SimpleDateFormat("HH:mm:ss").format(new Date())); //ÈáäÊîæÈîÅ lock.wait(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; //flagÂèò‰∏∫false System.out.println(Thread.currentThread() + "‰ªªÂä°ÂÆåÊàêflag is false,wait:" + new SimpleDateFormat("HH:mm:ss").format(new Date())); &#125; &#125; &#125; ÈÄöÁü•ÊñπÔºö 1234567891011121314151617181920class Notify implements Runnable &#123; @Override public void run() &#123; synchronized (lock) &#123; //flagÂèò‰∏∫false System.out.println(Thread.currentThread() + " " + new SimpleDateFormat("HH:mm:ss").format(new Date())); flag = false; lock.notifyAll(); try &#123; TimeUnit.SECONDS.sleep(5); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; System.out.println("123"); &#125; &#125; Áä∂ÊÄÅÂàÜÊûê 1.waitÊñπÊ≥ïË∞ÉÁî®ÂêéÔºåÁ∫øÁ®ãË£ÖÂ°´Áî±RunningÂèò‰∏∫waitingÁä∂ÊÄÅÔºåÁ≠âÂæÖÁä∂ÊÄÅ‰πüÊòØ‰∏Ä‰∏™Á≠âÂæÖÈòüÂàóÔºåÂÖàËøõÂÖ•Á≠âÂæÖÈòüÂàóÁöÑÔºånotify()ÂÖàÂá∫ÈòüÂàó 2.notify()ÊàñËÄÖnotifyAll()ÊñπÊ≥ïË∞ÉÁî®ÂêéÔºåÁ≠âÂæÖÁ∫øÁ®ã‰∏ç‰ºöÁ´ãÂç≥‰ªéwait()‰∏≠ËøîÂõûÔºåÈúÄË¶ÅËé∑ÂæóÈîÅ‰πãÂêéÊâç‰ºöËøîÂõû„ÄÇ 3.notify()ÔºåÂ∞ÜÁ≠âÂæÖÁ∫øÁ®ã‰∏≠ÁöÑ‰∏Ä‰∏™Á∫øÁ®ãÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàóÔºåwaitingÁä∂ÊÄÅÂèò‰∏∫BLOCKEDÔºånotifyAll()ÊñπÊ≥ïË∞ÉÁî®ÂêéÔºåÂ∞ÜÁ≠âÂæÖÁöÑÊâÄÊúâÁ∫øÁ®ãÂùáÁßªÂä®Âà∞ÂêåÊ≠•ÈòüÂàóÔºåÁî±waitingÁä∂ÊÄÅÂèò‰∏∫BLOCKED Á∫øÂ±Ç‰πãÈó¥ÁöÑIO Â§ö‰∏™Á∫øÁ®ã‰πãÈó¥Âçè‰ΩúËøêË°åÔºåÂäøÂøÖ‰ºöÂ≠òÂú®‰∏Ä‰∫õÊï∞ÊçÆÁöÑ‰∫§‰∫íÔºåÊàë‰ª¨‰ª•ÈúÄÊ±Ç‰∏∫ÂØºÂêëÔºåÂΩìÂá∫Áé∞ËøôÁßçÁöÑÈúÄÊ±ÇÔºåÊàë‰ª¨ÂÆûÁé∞ÁöÑÊñπÂºèÊòØ‰ªÄ‰πàÂë¢„ÄÇ Á¨¨‰∏ÄÊÉ≥Âà∞ÁöÑÊòØÔºåÂÖ±‰∫´ÂèòÈáè„ÄÇËÆæÁΩÆ‰∏Ä‰∏™ÂÖ±‰∫´ÁöÑÂèòÈáèÔºåÊï∞ÊçÆÂèØ‰ª•Â≠òÂú®ÈáåÈù¢Ôºå‰ΩøÁî®volatile‰øÆÈ•∞ÔºåËøô‰∏™ÂèòÈáèÂ∞±ÂèØ‰ª•Âú®Â§ö‰∏™Á∫øÁ®ã‰∏≠‰øùÊåÅÂèØËßÅ„ÄÇ ËøôÊòØ‰∏ÄÁßçÂäûÊ≥ï„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÊúâ10‰∏™Á∫øÁ®ãÔºå‰ΩÜÊòØÂè™ËÉΩÂú®AÔºåB‰∏§‰∏™Á∫øÁ®ã‰πãÈó¥ËÆøÈóÆËøô‰∏™ÂèòÈáèÔºåÂÖ∂‰ªñÂèòÈáè‰∏çËÉΩËÆøÈóÆÔºåÈÇ£‰πàËøôÊ†∑ÂèàËØ•ÊÄé‰πàÂÅöÂë¢„ÄÇ ËøôÊó∂ÂÄôÂèØ‰ª•ÈÄöËøájavaÁ∫øÁ®ãÊèê‰æõÁöÑIOÊìç‰ΩúÊù•ÂÆûÁé∞„ÄÇÁÆ°ÈÅìËæìÂÖ•/ËæìÂá∫ÊµÅ„ÄÇ Á∫øÁ®ã‰πãÈó¥ÁöÑÁÆ°ÈÅìËæì‚ºä/ËæìÂá∫ÊµÅÂíåÊôÆÈÄöÁöÑ‚ΩÇ‰ª∂Ëæì‚ºä/ËæìÂá∫ÊµÅÊàñËÄÖ‚ΩπÁªúËæì‚ºä/ËæìÂá∫ÊµÅ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÔºåÂÆÉ‰∏ªË¶Å‚Ω§‰∫éÁ∫øÁ®ã‰πãÈó¥ÁöÑÊï∞ÊçÆ‰º†ËæìÔºå‚ΩΩ‰º†ËæìÁöÑÂ™í‰ªã‰∏∫ÂÜÖÂ≠ò„ÄÇ ÂàÜÁ±ªÔºö Èù¢ÂêëÂ≠óËäÇ PipedOutputStream PipedInputStream Èù¢ÂêëÂ≠óÁ¨¶ PipedReader PipedWriter ÂæÖÁª≠‚Ä¶]]></content>
      <categories>
        <category>java</category>
        <category>Âπ∂Âèë</category>
      </categories>
      <tags>
        <tag>Âπ∂Âèë</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∏ÄÁØáÊñáÁ´†ËØ¥Ê∏ÖÊ•öjavaÁ∫øÁ®ã-Âü∫Á°Ä]]></title>
    <url>%2F2018%2F07%2F25%2Fjava%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[[TOC] ÂèàÈ™óÂà∞‰∏Ä‰∏™ËÆøÈóÆÈáè„ÄÇ„ÄÇ„ÄÇÂë∏ ÔºåjavaÁ∫øÁ®ãÈÇ£‰πàÂ§öÁü•ËØÜÔºåÊÄé‰πàÂèØËÉΩ‰∏ÄÁØáÂ∞èÊñáËÆ≤ÂæóÂÆåÔºàÊàñËÆ∏Â§ßÁ•ûËÉΩËÆ≤Ê∏ÖÊ•öÔºâ„ÄÇËÑöË∏èÂÆûÂú∞Ôºå‰∏ÄÊ≠•‰∏ÄÊ≠•Âæ™Â∫èÊ∏êËøõÊâçÊòØÊúÄÂø´ÁöÑÂäûÊ≥ï„ÄÇÂØπÔºåÊàëÊòØËØ¥ÁªôËá™Â∑±Ëøô‰∏™ÊÄ•ÊÄßÂ≠êÁöÑüò± ÂàõÂª∫javaÁ∫øÁ®ãÁöÑ‰∏§ÁßçÊñπÂºèÂíåÂêØÂä® ÁªßÊâøThreadÁ±ª ÁªßÊâøThreadÁ±ªÔºåÁÑ∂ÂêéÈáçÂÜôrun()ÊñπÊ≥ïÔºåÈÄöËøáÁ∫øÁ®ãÁöÑstart()ÂºÄÂêØÁ∫øÁ®ã 1234567891011121314public class RunByThread extends Thread&#123; @Override public void run()&#123; while(true)&#123; try&#123; Thread.sleep(5000); System.out.println("running by thread......"); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; &#125;&#125; ÂÆûÁé∞RunnableÊé•Âè£ ‰∏éThreadÁ±ª‰ººÔºåÂÆûÁé∞RunnableÊé•Âè£ÔºåÈáçÂÜôÂÖ∂‰∏≠ÁöÑrun()ÊñπÊ≥ïÔºåÈÄöËøáÁ∫øÁ®ãÁöÑstart()ÂºÄÂêØÁ∫øÁ®ã„ÄÇ 1234567891011121314151617public class RunByRunnable implements Runnable &#123; public void run() &#123; while(true)&#123; try&#123; Thread.sleep(1000); System.out.println("running by runnable......"); &#125;catch (InterruptedException e)&#123; System.out.println("interrupted..."); e.printStackTrace(); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; &#125;&#125; 3.ÂêØÂä®Á∫øÁ®ã ‚Äã ÁªßÊâøThreadÁ±ªÁöÑÂ≠êÁ±ªÔºåÂèØÈÄöËøá[1.ÂàõÂª∫Êñ∞ÂØπË±°]ÊàñËÄÖ[2.ÂàõÂª∫ÂØπË±°ÊîæÂÖ•ThreadÁ±ª]Êù•ÂàõÂª∫Á∫øÁ®ã ‚Äã ÂÆûÁé∞RunnableÊé•Âè£ÁöÑÊñπÊ≥ïÔºåÈÄöËøáÊñ∞Âª∫ÂØπË±°ÔºåÊîæÂÖ•ThreadÁ±ª‰∏≠Êù•ÂàõÂª∫Á∫øÁ®ã„ÄÇÂõ†‰∏∫RunnableÊé•Âè£Âè™Êúârun()ÊñπÊ≥ï„ÄÇ ‚Äã ‰ΩøÁî®ThreadÊèê‰æõÁöÑstart()ÊñπÊ≥ïÂêØÂä®Á∫øÁ®ã 1234567891011121314151617public class StartThead &#123; public static void main(String[] args) &#123; //ÁªßÊâøThreadÁ±ªÁöÑÊñπÊ≥ïÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰∏§ÁßçÊñπÊ≥ïÂºÄÂêØÁ∫øÁ®ã //1. ÂàõÂª∫ÂÆû‰æã RunByThread runByThread = new RunByThread(); runByThread.start(); //2. ÂàõÂª∫ÂØπË±°ÔºåÊîæÂÖ•Thread‰∏≠ Thread threadRun = new Thread(new RunByThread()); threadRun.start(); threadRun.isInterrupted(); //ÂÆûÁé∞RunnableÊé•Âè£ÁöÑÊñπÊ≥ïÔºåÈÄöËøá‰ª•‰∏ã‰∏ÄÁßçÊñπÊ≥ïÂºÄÂêØÁ∫øÁ®ã„ÄÇ //ÂàõÂª∫ÂØπË±°ÔºåÊîæÂÖ•Thread‰∏≠ Thread thread = new Thread(new RunByRunnable(),"runByThread"); thread.start(); &#125;&#125; Á∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÂà´Áé∞‰ª£Êìç‰ΩúÁ≥ªÁªüÂü∫Êú¨Èáá‚Ω§Êó∂ÂàÜÁöÑÂΩ¢ÂºèË∞ÉÂ∫¶Ëøê‚æèÁöÑÁ∫øÁ®ãÔºåÊìç‰ΩúÁ≥ªÁªü‰ºöÂàÜÂá∫‚ºÄ‰∏™‰∏™Êó∂Èó¥‚ΩöÔºåÁ∫øÁ®ã‰ºöÂàÜÈÖçÂà∞Ëã•‚º≤Êó∂Èó¥‚ΩöÔºåÂΩìÁ∫øÁ®ãÁöÑÊó∂Èó¥‚Ωö‚Ω§ÂÆå‰∫ÜÂ∞±‰ºöÂèë‚Ω£Á∫øÁ®ãË∞ÉÂ∫¶ÔºåÂπ∂Á≠âÂæÖÁùÄ‰∏ãÊ¨°ÂàÜÈÖç„ÄÇ ËÆæÁΩÆÁ∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ßÔºåÁõÆÁöÑÊòØÊåâÁÖßÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÁªôÁ∫øÁ®ãÂàÜÈÖçÊó∂Èó¥ÁâáÁöÑÂ§öÂ∞ëÔºå‰ºòÂÖàÁ∫ßË∂äÈ´òÔºåÊó∂Èó¥ÁâáË∂äÂ§ö„ÄÇ ‰ºòÂÖàÁ∫ßËåÉÂõ¥Ôºö 1-10 ÊñπÊ≥ï setPriority(int) ‰ª£Á†ÅÂÆû‰æãÔºö 1234567891011121314151617181920212223242526public class RunByRunnable implements Runnable&#123; @Override public void run() &#123; System.out.println(Thread.currentThread().getName()); &#125; public static void main(String[] args) &#123; RunByRunnable runByRunnable = new RunByRunnable(); Thread thread1 = new Thread(runByRunnable,"run1"); Thread thread2 = new Thread(runByRunnable,"run2"); Thread thread3 = new Thread(runByRunnable,"run3"); Thread thread4 = new Thread(runByRunnable,"run4"); thread1.setPriority(5); thread2.setPriority(3); thread3.setPriority(8); thread4.setPriority(1); thread1.start(); thread2.start(); thread3.start(); thread4.start(); &#125;&#125; (Êï≤ÈªëÊùøÔºÅÔºÅ)Âú®‰∏çÂêåÁöÑJVM‰ª•ÂèäÊìç‰ΩúÁ≥ªÁªü‰∏äÔºåÁ∫øÁ®ãËßÑÂàí‰ºöÂ≠òÂú®Â∑ÆÂºÇÔºåÊúâ‰∫õÊìç‰ΩúÁ≥ªÁªüÁîö‚æÑ‰ºöÂøΩÁï•ÂØπÁ∫øÁ®ã‰ºòÂÖàÁ∫ßÁöÑËÆæÂÆö„ÄÇso: ==Á∫øÁ®ã‰ºòÂÖàÁ∫ß‰∏çËÉΩ‰Ωú‰∏∫Á®ãÂ∫èÊ≠£Á°ÆÊÄßÁöÑ‰æùËµñ== Á∫øÁ®ãÁöÑÁä∂ÊÄÅjavaÁ∫øÁ®ã‰∏≠‰∏ÄÂÖ±Êúâ6ÁßçÁä∂ÊÄÅÔºö new Êñ∞ÂàõÂª∫Áä∂ÊÄÅÔºåËøòÊú™Ë∞ÉÁî®start()ÊñπÊ≥ï runnable ËøêË°åÁä∂ÊÄÅÔºåjava‰∏≠ÔºåÂ∞ÜÂ∞±Áª™ÂíåËøêË°åÁªüÁß∞‚ÄúËøêË°å‰∏≠‚Äù blocked ÈòªÂ°ûÁä∂ÊÄÅÔºåÁ∫øÁ®ãÈòªÂ°û‰∫éÈîÅ waiting Á≠âÂæÖÁä∂ÊÄÅÔºå‰∏ÄÁõ¥Á≠âÂæÖÈÄöÁü•Êàñ‰∏≠Êñ≠ time_waiting Ë∂ÖÊó∂Á≠âÂæÖÔºåÁ≠âÂæÖÈÄöÁü•Êàñ‰∏≠Êñ≠ÔºåË∂ÖÊó∂ÂêéËá™Âä®ËøîÂõû terminated ÂΩìÂâçÁ∫øÁ®ãÂ∑≤ÁªèÊâßË°åÂÆåÊØï DaemonÁ∫øÁ®ã‚Äã DaemonÁ∫øÁ®ãÂç≥‰∏∫ÂÆàÊä§Á∫øÁ®ãÔºåÊòØ‰∏ÄÁßçÊîØÊåÅÊÄßÁ∫øÁ®ãÔºå‰∏ªË¶ÅÁî®‰∫éÁ®ãÂ∫èÂêéÂè∞‰∏≠ÊîØÊåÅÊÄßÂ∑•‰Ωú„ÄÇ‰æãÂ¶ÇÂûÉÂúæÂõûÊî∂„ÄÇÂΩì‰∏Ä‰∏™JavaËôöÊãüÊú∫‰∏çÂ≠òÂú®ÈùûDaemonÁöÑÊó∂ÂÄôÔºåJavaËôöÊãüÊú∫‰ºöËá™Âä®ÈÄÄÂá∫Ôºå‰∏çËÆ∫DaemonÊòØÂê¶ÊâßË°åÂÆåÊØïÔºåÊòØ‰ªÄ‰πàÁä∂ÊÄÅ„ÄÇ ‚Äã ÊñπÊ≥ïÔºö thread.setDaemon(true); ‰ª•‰∏ã‰ª£Á†ÅÔºåÂèØÊµãËØïDaemonÁöÑËøêË°åÊòØÂê¶‰ºöË¢´Âº∫Âà∂ÊùÄÊéâ 123456789101112131415161718192021222324public class DaemonThread extends Thread &#123; @Override public void run() &#123; try &#123; System.out.println("DaemonThread running start"); TimeUnit.SECONDS.sleep(1); System.out.println("DaemonThread running end"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); System.out.println("DaemonThread InterruptedException"); &#125; catch (Exception e) &#123; e.printStackTrace(); System.out.println("DaemonThread exception"); &#125; finally &#123; System.out.println("DaemonThread finally"); &#125; &#125; public static void main(String[] args) &#123; DaemonThread daemonThread = new DaemonThread(); daemonThread.setDaemon(true); daemonThread.start(); &#125;&#125; ÊâßË°åÁªìÊûúÔºö DaemonThread running start ËØ•Á®ãÂ∫èÊúâ‰∏§‰∏™Á∫øÁ®ãÔºå‰∏Ä‰∏™‰∏ªÁ∫øÁ®ãÔºå‰∏Ä‰∏™Ë¢´ËÆæÁΩÆ‰∏∫DaemonÁöÑÁ∫øÁ®ã„ÄÇÂÆàÊä§Á∫øÁ®ãÂºÄÂßãÊâßË°åÂêéÔºåËøõÂÖ•Áù°Áú†Áä∂ÊÄÅ„ÄÇÁÑ∂Âêé‰∏ªÁ∫øÁ®ãÊâßË°åÂÆåÊØïÔºåËøôÊó∂JVMÂèëÁé∞Ê≤°Êúâ‰∫ÜÈùûÂÆàÊä§Á∫øÁ®ãÔºå‰∫éÊòØÁõ¥Êé•ÈÄÄÂá∫‰∫Ü„ÄÇDaemonÁ∫øÁ®ã‰∏≠Êú™ÊâßË°åÂÆåÁöÑ‰ª£Á†ÅÔºå‰πü‰∏ç‰ºöÂÜçÊâßË°å„ÄÇ Á∫øÁ®ã‰∏≠Êñ≠ÁöÑÊ¶ÇÂøµÂíå‰ΩøÁî®‚Äã ‰∏≠Êñ≠ÂèØ‰ª•ÁêÜËß£‰∏∫Á∫øÁ®ãÁöÑ‰∏Ä‰∏™Ê†áËØÜ‰ΩçÁä∂ÊÄÅ„ÄÇÂÆÉË°®Á§∫‰∏Ä‰∏™ËøêË°å‰∏≠ÁöÑÁ∫øÁ®ãÊòØÂê¶Ë¢´ÂÖ∂ÂÆÉÁ∫øÁ®ãËøõË°å‰∫Ü‰∏≠Êñ≠Êìç‰Ωú„ÄÇ ‚Äã ‰ΩøÁî®Ôºö AÁ∫øÁ®ãÂØπBÁ∫øÁ®ãË¶ÅËøõË°å‰∏≠Êñ≠Ôºö Âú®A‰∏≠Ë∞ÉÁî®ÔºåB.interrupt()Ôºõ BÁ∫øÁ®ãÂØπAÁ∫øÁ®ãËøõË°åÂìçÂ∫îÔºöÈÄöËøáË∞ÉÁî®ÊñπÊ≥ï isInterrupted()ÊñπÊ≥ïÂà§Êñ≠ÊòØÂê¶Ë¢´ÊâìÊñ≠Ôºåtrue‰∏∫‰∏≠Êñ≠ËøáÔºåfalse‰∏∫Êú™‰∏≠Êñ≠Ëøá„ÄÇ Ê†áËØÜ‰ΩçÂ§ç‰ΩçÔºöThread.interrupted ‚Äã ÂΩìÁ∫øÁ®ã‰∏∫ÁªàÁªìÁä∂ÊÄÅÔºåÂç≥‰ΩøÁ∫øÁ®ãË¢´‰∏≠Êñ≠ËøáÔºåÊ†áÂøó‰Ωç‰πü‰∏∫falseÂΩìÊäõÂá∫InterruptedExceptionÂºÇÂ∏∏Êó∂Ôºåjvm‰ºöÂÖàÂ∞Ü‰∏≠Êñ≠Ê†áÂøó‰ΩçÊ∏ÖÈô§ÔºåÊâÄ‰ª•isInterrupted() ‰∏∫false„ÄÇ ÂÆû‰æã‰ª£Á†Å 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class ThreadInterrupt &#123; public static void main(String[] args) &#123; //sleepThread‰∏çÂÅúÁöÑÂ∞ùËØïÁù°Áú† Thread sleepThread = new Thread(new SleepRunner(), "sleepThread"); sleepThread.setDaemon(true); //budyThreadÁ∫øÁ®ã‰∏ÄÁõ¥Âú®ÊâßË°å Thread busyThread = new Thread(new BusyRunner(), "busyThread"); busyThread.setDaemon(true); sleepThread.start(); busyThread.start(); //‰ºëÁú†Âá†ÁßíÈíüÔºåËÆ©‰∏§‰∏™Á∫øÁ®ãÂÖÖÂàÜËøêË°å try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; sleepThread.interrupt(); busyThread.interrupt(); System.out.println("sleepThread interrupted is " + sleepThread.isInterrupted()); System.out.println("busyThread interrupted is " + busyThread.isInterrupted()); //Èò≤Ê≠¢‰∏§‰∏™Á∫øÁ®ãÊèêÂâçÈÄÄÂá∫ try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class SleepRunner implements Runnable &#123; @Override public void run() &#123; while (true) &#123; try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125;class BusyRunner implements Runnable &#123; @Override public void run() &#123; while (true) &#123; //xxx Áà±ÊâßË°å‰ªÄ‰πàÊâßË°å‰ªÄ‰πàÂêß &#125; &#125;&#125; ÊâßË°åÁªìÊûú sleepThread interrupted is falsebusyThread interrupted is truejava.lang.InterruptedException: sleep interrupted at java.lang.Thread.sleep(Native Method) at ThreadPackage.SleepRunner.run(ThreadInterrupt.java:57) at java.lang.Thread.run(Thread.java:748) ÊäõÂá∫InterruptedExceptionÁöÑÁ∫øÁ®ãÔºå‰∏≠Êñ≠‰ΩçË¢´Ê∏ÖÈô§‰∫ÜÔºåÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÔºåÂ∞±Ê≤°ÊúâË¢´Ê∏ÖÈô§ ÊÄªÁªìÊú¨ÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤Ëß£JavaÁ∫øÁ®ãÁöÑÂü∫Á°ÄÔºå‰ΩøÁî®„ÄÇÈáçÁÇπÂú®‰∫éJavaÁ∫øÁ®ãÁöÑÂàõÂª∫ÂíåÂºÄÂêØ„ÄÇ ÂÖ®ÈÉ®‰ª£Á†ÅËßÅÔºö ‚Äã https://github.com/ValjeanShaw/MyConcurrent/tree/develop/src/main/java/ThreadPackage]]></content>
      <categories>
        <category>java</category>
        <category>Âπ∂Âèë</category>
      </categories>
      <tags>
        <tag>Âπ∂Âèë</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[synchronizedÂÖ≥ÈîÆÂ≠ó]]></title>
    <url>%2F2018%2F07%2F16%2Fsynchronized%E5%85%B3%E9%94%AE%E5%AD%97%2F</url>
    <content type="text"><![CDATA[[TOC] ÂÆö‰πâsynchronizedÊñπÊ≥ïÊòØjava‰∏≠Â∏∏Áî®ÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂ±û‰∫éJVMÂ±ÇÈù¢ÔºåjavaÁöÑÂÜÖÁΩÆÈîÅ,Java‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÂØπË±°ÈÉΩÂèØ‰ª•‰Ωú‰∏∫ÈîÅÔºåÂΩìÂØπË±°Ë¢´synchronizedÈîÅ‰Ωè‰πãÂêéÔºåÊ≠§ÂØπË±°ÂΩìÂâçÊòØË¢´ËØ•ÈîÅÂíåËØ•Á∫øÁ®ãÁã¨Âç†„ÄÇ Â∫îÁî®ÂàÜ‰∏∫‰øÆÈ•∞ÊñπÊ≥ïÂíå‰øÆÈ•∞‰ª£Á†ÅÂùó‰∏§Â§ßÁ±ªÔºöÂÖ∑‰ΩìÂ¶Ç‰∏ã 4ÁßçÁî®Ê≥ïÔºö ‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ï ‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï ÂêåÊ≠•ÂÆû‰æãÊñπÊ≥ï‰∏≠ÁöÑ‰ª£Á†ÅÂùó ÂêåÊ≠•ÈùôÊÄÅÊñπÊ≥ï‰∏≠ÁöÑ‰ª£Á†ÅÂùó ‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ï123456789public synchronized void addOne()&#123; try&#123; Thread.sleep(1000); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; num++; System.out.println(this.getId()+" "+num+" "+System.currentTimeMillis()); &#125; ÂΩì‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ïÊó∂ÔºåÈîÅ‰ΩèÁöÑÊòØË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÂΩìÂâçÂØπË±°ÔºåÂç≥Ôºö12Thread thread1 = new ThreadTest();Thread thread2 = new ThreadTest(); thread1Âíåthread2Âú®Âêå‰∏ÄÊó∂ÂàªË∞ÉÁî®ÊòØ‰∏ç‰ºö‰∫ßÁîüÂÜ≤Á™ÅÁöÑÔºå‰ΩÜÊòØthread1Âíåthread2Ëá™Ë∫´ÂÜÖÈÉ®ÊòØ‰ºöÁõ∏‰∫íÁ´û‰∫âÁöÑ„ÄÇ‰æãÔºåÂ§ö‰∏™Á∫øÁ®ã‰∏çËÉΩÂêåÊó∂Ë∞ÉÁî®thread1.addOne()ÊñπÊ≥ï„ÄÇ ‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï123456789public static synchronized void addTwo()&#123; try&#123; Thread.sleep(1000); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; count += 2; System.out.println(" "+count+" "+System.currentTimeMillis()); &#125; ÈîÅ‰ΩèÁöÑÊòØÂΩìÂâçËøô‰∏™Á±ªÁöÑClassÂØπË±°ÔºåÂç≥ÔºöÂΩìË∞ÉÂä® addTwo()ÊñπÊ≥ïÊó∂ÔºåÂ∞Ü‰∫ßÁîüÁ´û‰∫â„ÄÇ‰∏çËÆ∫ÂÆû‰æãÂØπË±°ÊòØ‰ªÄ‰πà ‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ï‰∏≠ÁöÑ‰ª£Á†ÅÂùó1234567891011121314public void addThree()&#123; //‰ΩøÁî®‰∫Ü‚Äúthis‚ÄùÔºåÂç≥‰∏∫Ë∞ÉÁî®addÊñπÊ≥ïÁöÑÂÆû‰æãÊú¨Ë∫´„ÄÇ synchronized (this)&#123; try&#123; Thread.sleep(1000); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; number += 3; &#125; System.out.println(" "+number+" "+System.currentTimeMillis()); &#125; ÈáçÁÇπÂÖ≥Ê≥®synchronized (this)Êã¨Âè∑ÈáåÈù¢„ÄÇthisÊåáÂÆöÊòØÂºïÁî®ÁöÑÂΩìÂâçÂØπË±°ÔºåÊïàÊûúÂíå‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ï‰∏ÄËá¥„ÄÇÂΩì()ÈáåÈù¢ÊòØ ÂΩìÂâçÁ±ªÁöÑclassÂØπË±°Êó∂SynchronizedTest.classÔºåÊïàÊûúÂíå‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï‰∏ÄËá¥„ÄÇ ‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï‰∏≠ÁöÑ‰ª£Á†ÅÂùó123456789101112public static void addFour()&#123; synchronized (SynchronizedTest.class)&#123; try&#123; Thread.sleep(1000); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; counter += 4; &#125; System.out.println(" "+counter+" "+System.currentTimeMillis()); &#125; ÂΩìÈùôÊÄÅÊñπÊ≥ïÊó∂Ôºå()ÈáåÈù¢Âè™ËÉΩÊòØÂΩìÂâçÁ±ªÁöÑclassÂØπË±° SynchronizedTest.classÔºåÊïàÊûúÂíå‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï‰∏ÄËá¥„ÄÇ synchronized‰ΩøÁî®ÁöÑ‰∏§‰∏™ÁªÜËäÇÈóÆÈ¢ò synchronizedÈîÅÊòØÂèØÈáçÂÖ•ÈîÅ Áà∂Â≠êÁ±ªÊñπÊ≥ïÁöÑÈîÅÂèØ‰ª•ÈáçÂÖ• Âêå‰∏Ä‰∏™ÂØπË±°ÁöÑ‰∏§‰∏™ÊñπÊ≥ïÔºå‰πüÂèØ‰ª•ÈáçÂÖ• 123456789101112131415161718192021222324252627282930313233343536373839public class ReentrantSynchronized extends Father &#123; /** * sychronized ÈáçÂÜôÁà∂Á±ªÁöÑÊñπÊ≥ïÔºåÈîÅ‰πüÂèØ‰ª•ÈáçÂÖ• */ @Override public synchronized void doSomeThing() &#123; super.doSomeThing(); System.out.println(this.getClass() + " -- " + Thread.currentThread().getId() + " -- " + Thread.currentThread().getName()); System.out.println("ReentrantSynchronized child doSomeThing"); &#125; /** * sychronized Âêå‰∏Ä‰∏™ÂØπË±°‰∏≠ÁöÑ‰∏§‰∏™ÊñπÊ≥ïÔºå‰πüÂèØ‰ª•ÈáçÂÖ• */ public synchronized void doOneThing() &#123; System.out.println(this.getClass() + " -- " + Thread.currentThread().getId() + " -- " + Thread.currentThread().getName()); System.out.println("ReentrantSynchronized child doOneThing"); doAnotherThing(); &#125; public synchronized void doAnotherThing() &#123; System.out.println(this.getClass() + " -- " + Thread.currentThread().getId() + " -- " + Thread.currentThread().getName()); System.out.println("ReentrantSynchronized child doAnotherThing"); &#125; public static void main(String[] args) &#123; ReentrantSynchronized reentrantSynchronized = new ReentrantSynchronized(); reentrantSynchronized.doSomeThing(); reentrantSynchronized.doOneThing(); &#125;&#125;class Father &#123; public synchronized void doSomeThing() &#123; System.out.println(this.getClass() + " -- " + Thread.currentThread().getId() + " -- " + Thread.currentThread().getName()); System.out.println("father doSomeThing()"); &#125;&#125; synchronizedÈîÅÊòØËá™Âä®ÈîÅÔºåÂΩìÊäõÂá∫ÂºÇÂ∏∏Êó∂Ôºå‰ºöËá™Âä®ÈáäÊîæÈîÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * ÂΩìÂºÇÂ∏∏Ë¢´Âç≥Êó∂Â§ÑÁêÜÊéâÔºåÊú™ÊäõÂá∫synchronizedÁöÑ‰øÆÈ•∞Âå∫Ôºå‰∏ç‰ºöÈáäÊîæÈîÅ */ public synchronized void doOneThing() &#123; int i = 0; while (true) &#123; i++; try &#123; Thread.sleep(100); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; System.out.println("now,the i is:" + i); try &#123; if (i == 10) &#123; //ÊïÖÊÑèËÆ©ÂÆÉÊäõÂá∫ÂºÇÂ∏∏ Integer.parseInt("a"); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); continue; &#125; &#125; &#125; /** * ÂºÇÂ∏∏ÊäõÂá∫synchronizedÁöÑ‰øÆÈ•∞Âå∫Ôºå‰ºöÈáäÊîæÈîÅ */ public synchronized void doTwoThing() &#123; int j = -100; while (true) &#123; j--; try &#123; Thread.sleep(100); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; System.out.println("yes boy,the j is:" + j); if (j == -110) &#123; //ÊïÖÊÑèËÆ©ÂÆÉÊäõÂá∫ÂºÇÂ∏∏ Integer.parseInt("a"); &#125; &#125; &#125; ÈôÑÂΩïÔºåÂÆåÊï¥‰ª£Á†Å‚Äã ‰º†ÈÄÅÂ∏¶ÔºåËØ∑ÁÇπÂáª‰∏äËΩ¶]]></content>
      <categories>
        <category>java</category>
        <category>Âπ∂Âèë</category>
      </categories>
      <tags>
        <tag>ÈîÅ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅ]]></title>
    <url>%2F2018%2F07%2F12%2F%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81%2F</url>
    <content type="text"><![CDATA[Ëøô‰∏§‰∏™Â±û‰∫éÂ∏∏Âú®Êï∞ÊçÆÂ∫ì‰∫ãÂä°‰∏≠Ë¢´ÊèêÂèäÔºå‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÂ±û‰∫éÊÄùÊÉ≥Á∫ßÂà´ÔºåÊòØ‰∏∫‰∫Ü‰øùÊåÅ‰∫ãÂä°ÁöÑÈöîÁ¶ªÊÄß‰ª•ÂèäÊï∞ÊçÆÂ∫ìÁöÑ‰∏ÄËá¥ÊÄßËÄåË¢´‰∏öÂÜÖÂÆö‰πâÂá∫Êù•ÁöÑ‰∏ÄÁßçÊâãÊÆµ,Âπ∂‰∏çÂ±û‰∫éÊï∞ÊçÆÂ∫ìÈîÅÊú∫Âà∂,‰ΩÜÊòØÊÇ≤ËßÇÈîÅÊòØ‰æùËµñ‰∫éÊï∞ÊçÆÂ∫ìÁöÑÈîÅÊú∫Âà∂ÂÆûÁé∞ÁöÑ„ÄÇ‰πêËßÇÈîÅ‰∏çÊòØÊï∞ÊçÆÂ∫ìËá™Â∏¶ÁöÑÔºåÈúÄË¶ÅËá™Â∑±ÂéªÂÆûÁé∞„ÄÇ [TOC] ÂÆö‰πâ ‰πêËßÇÈîÅÔºöÂΩìÂâç‰∫ãÂä°Êìç‰ΩúÊï∞ÊçÆÊó∂ÔºåËÆ§‰∏∫ÂÖ∂‰ªñ‰∫ãÂä°‰∏ç‰ºö‰øÆÊîπÊ≠£Âú®ËØªÂèñÁöÑÊï∞ÊçÆÂÖ∑‰ΩìÔºö ‰∫ãÂä°ËØªÂèñ Ôºå‰∏ç‰∏äÈîÅ ‰∫ãÂä°Êõ¥Êñ∞ÔºåÂú®Êèê‰∫§Êï∞ÊçÆÊõ¥Êñ∞‰πãÂâçÔºåÂÖàÊ£ÄÊü•Âú®ËØ•‰∫ãÂä°ËØªÂèñÊï∞ÊçÆÂêéÔºàÊõ¥Êñ∞ÂâçÔºâÔºåÊúâÊ≤°ÊúâÂÖ∂‰ªñ‰∫ãÂä°Âèà‰øÆÊîπ‰∫ÜËØ•Êï∞ÊçÆ„ÄÇÊó†ÔºåÂàô‰∫ãÂä°Êèê‰∫§ÔºõÊúâÔºåÂàô‰∫ãÂä°Â§±Ë¥•„ÄÇ ÊÇ≤ËßÇÈîÅÔºöËÆ§‰∏∫‰∫ãÂä°Âú®Êìç‰ΩúÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåËÇØÂÆö‰ºöÂá∫Áé∞ÂÜ≤Á™ÅÊï∞ÊçÆÂ∫ì‰∏≠ÊÇ≤ËßÇÈîÅÁöÑÂÆûÁé∞ÂàÜ‰∏§ÁßçÔºö ÂÖ±‰∫´ÈîÅ ÔºàËØªÈîÅÔºåÈíàÂØπselectÁöÑÈîÅÊú∫Âà∂ÔºâËØªÔºöÂ§ö‰∏™‰∫ãÂä°ÂèØÂè†Âä†ÈîÅÔºåÂèØ‰ª•ËØªÊï∞ÊçÆÔºåÂÜôÊï∞ÊçÆÂ∞ÜÁ≠âÂæÖÊâÄÊúâËØªÈîÅÈÉΩÈáäÊîæÊâçËÉΩÊâßË°åÂΩìÂØπ‰∏Ä‰∏™Êï∞ÊçÆÂä†ÂÖ•ÂÖ±‰∫´ÈîÅÔºåÂÖ∂‰ªñ‰∫ãÂä°ÂØπËØ•Êï∞ÊçÆÊúÄÂ§öÂè™ËÉΩÂÜçÂä†ÂÖ±‰∫´ÈîÅÔºå‰∏çËÉΩÂä†ÊéíÂÆÉÈîÅ ÊéíÂÆÉÈîÅ ÔºàÂÜôÈîÅÔºåÈíàÂØπupdate,deleteÁöÑÈîÅÊú∫Âà∂ÔºâÂÜôÔºöÂÜôÊï∞ÊçÆÊó∂ÔºåÁã¨Âç†ËØ•Êï∞ÊçÆÔºåËØ•Êï∞ÊçÆ‰∏çËÉΩÂÜçÂä†ÂÖ•‰ªª‰ΩïÂÖ∂‰ªñÈîÅÔºå‰πü‰∏çËÉΩÂè†Âä†ÊéíÂÆÉÈîÅ ÊÄé‰πà‰ΩøÁî®‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÊòØ‰∏ÄÁßçÊÄùÊÉ≥ÔºåÂú®java‰∏≠ÂíåÊï∞ÊçÆÂ∫ì‰∏≠ÂùáÊúâ‰∏çÂêåÁöÑÊÄùË∑ØÂÆûÁé∞ javaÂÆûÁé∞12* ‰πêËßÇÈîÅ java.util.concurrent.atomicÂåÖ‰∏≠ÁöÑÁ±ªÔºåÈÄöËøáCASÁÆóÊ≥ïÂÆûÁé∞* ÊÇ≤ËßÇÈîÅ sychronizedÊñπÊ≥ï Êï∞ÊçÆÂ∫ìÂÆûÁé∞1* ‰πêËßÇÈîÅ Ëá™Ë°åÂÆûÁé∞ÔºåÂèØÈÄöËøáÁâàÊú¨Âè∑ÊàñËÄÖÊó∂Èó¥Êà≥ÂÆûÁé∞ ‰æãÂ≠êÔºö‰∏ãÂçïÊìç‰Ωú 1. Êü•ËØ¢ÂΩìÂâç‰ø°ÊÅØÔºåÂåÖÊã¨ÁâàÊú¨Âè∑ `select (status,status,version) from t_goods where id=#{id}` 2. ÁîüÊàêËÆ¢ÂçïÔºå‰∏öÂä°Êìç‰Ωú 3. Êõ¥Êñ∞Êï∞ÊçÆ `update t_goods set status = #{status},version=version+1 where id=#{id} and version=#{version}` 123* ÊÇ≤ËßÇÈîÅ * ÂÖ±‰∫´ÈîÅÂÆûÁé∞ sqlËØ≠Âè•Ôºö `lock in share mode` ‰æãÂ≠êÔºöÂºÄÂêØ‰∏â‰∏™ÁªàÁ´ØÔºåÈùûËá™Âä®Êèê‰∫§‰∫ãÂä°Ê®°Âºè ‰∏Ä‰∏™ÁªàÁ´ØÂºÄÂêØÂÖ±‰∫´ÈîÅ ‚Äã Âè¶‰∏Ä‰∏™ÁªàÁ´ØÂØπÊï∞ÊçÆËøõË°åËØªÔºåËØªÊàêÂäüÔºåÂè†Âä†ÂÖ±‰∫´ÈîÅ‰πüÂèØ‰ª• Á¨¨‰∏â‰∏™ÁªàÁ´ØÂØπÊï∞ÊçÆËøõË°åupdateÊìç‰ΩúÔºåÂÜôÂ§±Ë¥•Ôºå‰∏ÄÁõ¥Á≠âÂæÖ 12* ÊéíÂÆÉÈîÅÂÆûÁé∞ sqlËØ≠Âè•Ôºö`for update` ‰æãÂ≠êÔºöÂºÄÂêØ‰∏§‰∏™ÁªàÁ´Ø Á¨¨‰∏Ä‰∏™ÊâßË°åÊéíÂÆÉÈîÅÔºåÊöÇ‰∏çÊèê‰∫§‰∫ãÂä° Á¨¨‰∫å‰∏™ÁªàÁ´ØÊâßË°å‰∏§‰∏™Êìç‰Ωúselect: Êü•ËØ¢Âá∫Êú™Êõ¥ÊîπÂâçÁöÑÊï∞ÊçÆupdate:Á≠âÂæÖÔºåÂ¶Ç‰∏ãÂõæ ÂΩìÁ¨¨‰∏Ä‰∏™ÁªàÁ´ØÊèê‰∫§‰∫ãÂä° commit work,Á¨¨‰∫å‰∏™ÁªàÁ´ØÁöÑupdateÊìç‰ΩúÊâßË°åÂÆåÊàê ‰ºòÁº∫ÁÇπ ‰πêËßÇÈîÅÔºö ‰ºòÁÇπÔºöÈÄÇÁî®‰∫éÂÜôÊØîËæÉÂ∞ëÁöÑÊÉÖÂÜµ‰∏ãÔºåÂç≥ÂÜ≤Á™ÅÁúüÁöÑÂæàÂ∞ëÂèëÁîüÁöÑÊó∂ÂÄôÔºåËøôÊ†∑ÂèØ‰ª•ÁúÅÂéª‰∫ÜÈîÅÁöÑÂºÄÈîÄÔºåÂä†Â§ß‰∫ÜÁ≥ªÁªüÁöÑÊï¥‰∏™ÂêûÂêêÈáè„ÄÇ Áº∫ÁÇπÔºåÂÜ≤Á™ÅÊØîËæÉÂ§öÁöÑÊÉÖÂÜµÔºåÊâßË°å‰ºöÂ≠òÂú®Â§ßÈáèÁöÑÂ§±Ë¥•Ôºå‰∏äÂ±ÇÂ∫îÁî®‰ºö‰∏çÊñ≠ÁöÑretryÔºåËøôÊ†∑ÂèçÂÄíÊòØÈôç‰Ωé‰∫ÜÊÄßËÉΩ ÊÇ≤ËßÇÈîÅÔºö ‰ºòÁÇπÔºö‰øùËØÅ‰∫ÜÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß Áº∫ÁÇπÔºö Â§ÑÁêÜÂä†ÈîÅÁöÑÊú∫Âà∂‰ºöËÆ©Êï∞ÊçÆÂ∫ì‰∫ßÁîüÈ¢ùÂ§ñÁöÑÂºÄÈîÄÔºåËøòÊúâÂ¢ûÂä†‰∫ßÁîüÊ≠ªÈîÅÁöÑÊú∫‰ºö„ÄÇ]]></content>
      <categories>
        <category>ÈîÅ</category>
      </categories>
      <tags>
        <tag>ÈîÅ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Èù¢ËØïÁúüÈ¢ò]]></title>
    <url>%2F2018%2F07%2F10%2F%E9%9D%A2%E8%AF%95%E7%9C%9F%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ËÄÉÊãâÈòÖËØªÁ¨îËØïÈ¢ò Âü∫Á°ÄÈÉ®ÂàÜÔºåÊï∞ÁªÑÁöÑ‰º†ÈÄíÊòØ‰º†ÈÄíÂØπË±°ËøòÊòØÂ§çÂà∂ÂØπË±° Ë°•Á†ÅËÆ°ÁÆóÊñπÂºè synchronizedÊñπÊ≥ïÂèØ‰øÆÈ•∞ÁöÑÊòØ‰ªÄ‰πàÔºå‰øÆÈ•∞Êó∂ÂÄôÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πà ÂÜôÁ∫øÁ®ã Èù¢ËØïÈ¢ò hashmapÂíåcocurrentHashMapÁöÑÂå∫Âà´ÂíåËÅîÁ≥ª volatileÊñπÊ≥ïÁöÑ‰ΩúÁî®ÂíåÂÜÖÈÉ®ÂàÜÊûê redisÂàÜÂ∏ÉÂºèÈîÅ Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÈîÅ cas ËøòÈúÄÂáÜÂ§áÁöÑÂú∞Êñπ redisÁöÑÊï∞ÊçÆÁ±ªÂûã Âπ∂Âèë rabbitmqÁöÑÂ§ç‰π† kafkaÁöÑÊ¶ÇÂøµ spring boot redis Áå´ÁúºÁîµÂΩ±‚Äã ÂÖàÁúãÁÆÄÂéÜÔºåÊ†πÊçÆÁÆÄÂéÜÂèëÈóÆ Áîª‰∏ÄÁîªÈ°πÁõÆÁöÑÁ≥ªÁªüÊû∂ÊûÑÂõæÔºå‰ΩøÁî®ÁöÑÊäÄÊúØÊ†à mycatÂ∫ïÂ±ÇÊÄé‰πàÁÆ°ÁêÜ‰∏ª‰ªéÔºåÊÄé‰πàÁÆ°ÁêÜËØªÂÜôÂàÜÁ¶ª ËÆæËÆ°‰∏Ä‰∏™ÂèëÊä•Âô®ÁöÑÊñπÊ°àÔºåÁî®Êù•ÁîüÊàêidÔºå‰∏çÈáçÂ§ç ***ÔºàÈöèÊÑèËÆæËÆ°ÊñπÊ°àÔºåÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÔºâ rabbitmqÂíåkafkaÁöÑÈÄâÂûãÔºàÊäÄÊúØÊñπÊ°àÂØπÊØîÔºâÔºåÂ∫ïÂ±ÇÁöÑÂéüÁêÜÊòØÂê¶‰∫ÜËß£ dubbo,RPCÁöÑË∞ÉÁî®ÊñπÂºèÂíåHTTPË∞ÉÁî®ÊñπÂºèÁöÑÂå∫Âà´ javaÂü∫Á°Ä hashmapÁöÑÁªìÊûÑÊòØ‰ªÄ‰πàÊ†∑ÁöÑÔºåÁ∫øÁ®ãÂÆâÂÖ®Âêó hashMap‰∏≠ÁöÑÁ∫¢ÈªëÊ†ëÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØÂ§öÂ∞ëÔºåÊòØÂê¶ÊúâÂÆâÂÖ®ÁöÑÈõÜÂêà concurrentHashMapÁöÑÁªìÊûÑÊòØ‰ªÄ‰πàÊ†∑Â≠êÁöÑ ‰∏∫‰ªÄ‰πàconcurrentHashMapÊòØÂÆâÂÖ®ÁöÑ volatileÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πà volatileÂ∫ïÂ±ÇÂéüÁêÜÊòØ‰ªÄ‰πàÔºåÊÄé‰πàÂÆûÁé∞ÁöÑ javaÁöÑÂÜÖÂ≠òÂ±èÈöúÂØπvolatileÁöÑÂΩ±Âìç lockÂíåsychronizedÊòØÂê¶‰∫ÜËß£ÔºåÁÆÄËø∞‰∏ãÂå∫Âà´ Á∫øÁ®ãÊ±†ÊòØÂê¶‰∫ÜËß£ÔºåÁ∫øÁ®ãÊ±†Âú®ÂàõÂª∫ÁöÑÊó∂ÂÄôÔºåÂøÖ‰º†ÁöÑÂèÇÊï∞ÊòØÂì™‰∫õ ÂÜô‰∏ÄÊÆµ‰ª£Á†ÅÔºå‰∫åÂàÜÊü•ÊâæÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶Â§öÂ∞ë Âø´ÁúãÊº´Áîª logÊó•ÂøóÊòØÂê¶‰ºöÂΩ±ÂìçÊÄßËÉΩ rabbitmqÂíåkafkaÈÄâÂûãÂå∫Âà´ rabbitmqÊï∞ÊçÆÂ≠òÂÇ®ÁöÑÂú∞Êñπ ÁÆóÊ≥ïÔºöÂ∞Ü‰∏Ä‰∏™ÊúâÂ∫èÁöÑÁü≠Êï∞ÁªÑÔºåÊèíÂÖ•Âà∞ÊúâÂ∫èÁöÑÈïøÊï∞ÁªÑ‰∏≠ÔºåË¶ÅÊ±Ç‰øùËØÅÈïøÊï∞ÁªÑÊúâÂ∫è ÁìúÂ≠ê‰∫åÊâãËΩ¶ È°πÁõÆÁªìÊûÑÂõæ kafkaÂíårabbitmqÈÄâÂûã ÊäÄÊúØÂØπÊØî È°πÁõÆÊï∞ÊçÆÂ∫ìÊÄé‰πà‰ΩøÁî®ÁöÑ Êï∞ÊçÆÂ∫ì‰∫ãÂä°Êú∫Âà∂ÂàÜÁ±ª ÂπªËØªÂíåËÑèËØª Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÂàÜÁ±ª Êï∞ÊçÆÂ∫ì‰∏ª‰ªéÈÄöËøá‰ªÄ‰πàÂÆûÁé∞ÁöÑ Á¥¢ÂºïÂàÜÁ±ª spring Âíåspring bootÁöÑÂÖ≥Á≥ª spring IOCÊÄé‰πàÁêÜËß£ IOCÁöÑÊ≥®ÂÖ•ÊñπÂºèÂàÜÁ±ª spring AOPÊÄé‰πàÁêÜËß£ aopÈÄöÁü•ÁöÑÂàÜÁ±ª ÁéØÁªïÂàáÁÇπÁöÑ‰ΩøÁî® hashmapÂíåhashtableÁöÑÂå∫Âà´ concurrentHashMap volaliteÁöÑ‰ΩúÁî® ÊéíÂ∫èÁöÑmapÊúâÂì™‰∫õ sychronizedÈîÅÂØπË±° jvmÁöÑgc Á∫øÁ®ãÊ±†ÁöÑÁßçÁ±ª Á∫øÁ®ãÊ±†ÁöÑÂøÖË¶ÅÂèÇÊï∞ ÈÅáÂà∞ËøáÊúÄÂ§öÁöÑÂºÇÂ∏∏ÔºåÂºÇÂ∏∏ÁöÑ‰∏Ä‰∫õÁ±ª Êü•ÊâæÁÆóÊ≥ïÊúâÂì™‰∫õ ‰∫åÂàÜÊü•ÊâæÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ ÊéíÂ∫èÁÆóÊ≥ïÊúâÂì™‰∫õ ÂÜíÊ≥°ÊéíÂ∫èÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ Âø´ÊéíÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ ÂÜô‰∏Ä‰∏™ÁÆóÊ≥ïÔºöÊúâ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂ≠òÂú®‰∏âÁßçÊÉÖÂÜµÔºö1.ÈÄíÂ¢û 2.ÈÄíÂáè 3.ÂÖàÂáèÂêéÂ¢ûÔºàÂè™Êúâ‰∏Ä‰∏™Ê≥¢Ë∞∑Ôºâ,ÂÜôÁÆóÊ≥ïÊâæÂá∫ÊúÄÂ∞èÁöÑÂÄº Ëä±ÁîüÂ•ΩËΩ¶ ÊéíÂ∫èÁÆóÊ≥ïÊúâÂì™‰∫õ ËÆæËÆ°‰∏çÈáçÂ§çÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ìidÁîüÊàêÊñπÊ°àÔºåÊåâÁÖß‰∏ÄËá¥ÊÄßhashÁöÑÊÄùË∑ØÊÄé‰πàÂÅö ‰ºòÂåñÁöÑÊÄùË∑ØÔºåÂÖ≥‰∫éÁ¥¢ÂºïÂëΩ‰∏≠Ê£ÄÊü•Â¶Ç‰ΩïÊ£ÄÊü•ÔºàÁ¥¢ÂºïÁöÑÁü•ËØÜÔºâ ÂÖ≥‰∫éÊó•ÂøóÔºåÊòØÂê¶ÁúüÁöÑÊúâÂøÖË¶Å Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÁöÑB+Ê†ëÁªìÊûÑÊòØÂê¶‰∫ÜËß£„ÄÇinÁöÑÊìç‰ΩúÊòØÂê¶‰ºö‰ΩøÁî®B+Ê†ë rabbitmqÊòØÂê¶ÊòØÊúâÂ∫èÁöÑÔºåÊúâÊ≤°ÊúâÂõûÂ∫îÊú∫Âà∂ rabbitmqÁöÑpatitionÊòØÂê¶Áü•ÈÅì redisÁöÑÊï∞ÊçÆÁªìÊûÑÊúâÂá†Áßç Êúâ‰∏Ä‰∏™ÂØπË±°ÔºåÈáåÈù¢Âê´Êúâ‰∏Ä‰∫õÂÖÉÁ¥†ÔºåÊÄé‰πàÂ≠òÂÖ•redis‰∏≠ÔºàÊØîËæÉÈ¢ëÁπÅÊìç‰ΩúÔºåË¶ÅÊ±ÇÊÄßËÉΩÔºâ redisÁöÑÂàÜÂ∏ÉÂºèÈõÜÁæ§ÊÄé‰πàÂÅö redisÁöÑÊåÅ‰πÖÂåñÊÄé‰πàÂÆûÁé∞ spring IOCÂÆπÂô®Ê≥®ÂÖ•ÂéüÁêÜÔºåÊ∫êÁ†ÅÊòØÂê¶ÁúãËøá javaÂü∫Á°Ä„ÄÇÈõÜÂêàÁöÑÂàÜÁ±ªÔºåcollection‰∏ãÈù¢Êúâ‰ªÄ‰πàÈõÜÂêàÔºåmapÈõÜÂêàÊòØ‰∏çÊòØÂú®‰∏ÄËµ∑ mapÁöÑÂàùÂßãÂÆπÈáèÂíåË¥üËΩΩÂõ†Â≠êÊòØÂ§öÂ∞ë Êâ©ÂÆπÊÄé‰πàÊâ©ÂÆπÔºåÂÖ∑‰ΩìÊµÅÁ®ãÔºåÊòØÂê¶ÊòØ‰∏Ä‰∏™‰∏Ä‰∏™Â§çÂà∂ concurrentÂåÖ‰∏ãÈù¢ÊØîËæÉÁÜüÊÇâÂì™‰∏™Áü•ËØÜÁÇπÔºàvolatileÔºâ,‰ΩúÁî®ÂíåÂéüÁêÜÊòØ‰ªÄ‰πàÔºåÂ∫îÁî®Âú∫ÊôØÊòØ‰ªÄ‰πà ÈòüÂàóÂêåÊ≠•Âô®ÔºåÊòØÂê¶ÁÜüÊÇâÔºåÊúâÂì™‰∫õÈòüÂàóÂêåÊ≠•Âô® jvm‰∏≠ÔºåÂ†ÜÂíåÊ†àÊÄé‰πàÂÆö‰πâÔºåÊÄé‰πà‰ΩøÁî® Áî®javaÂÜô‰∏Ä‰∏™ÈìæË°®ÁöÑÁÆÄÂçïÊìç‰ΩúÔºåÊèíÂÖ•‰∏Ä‰∏™ÂÖÉÁ¥†ÂíåÂà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ ÂÄüË¥∑ÂÆù È°πÁõÆÁªìÊûÑÂõæ Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÔºåÊï∞ÊçÆÂ∫ìÁ¥¢ÂºïÂëΩ‰∏≠ÊÄé‰πàÁúãÔºàexplainÔºâ Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÊÄé‰πàÂàõÂª∫ Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÂéüÁêÜ Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÂîØ‰∏ÄÁ¥¢ÂºïÊÄé‰πàÂÆö‰πâ Ë∫´‰ªΩËØÅ‰∏∫‰æãÂ≠ê Êï∞ÊçÆÂ∫ìËÅîÂêàÁ¥¢Âºï abc a ab abc ÂÆûÁé∞ÂéüÁêÜ sqlËØ≠Âè•Ë∞É‰ºòÊÄé‰πàË∞É‰ºò ‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÊÄé‰πàÂÆö‰πâÔºå‰ºòÁº∫ÁÇπÊòØ‰ªÄ‰πà ÈõÜÂêàÊúâÂì™‰∫õÔºàÂ≠¶‰∏Ä‰∏ãÊÄé‰πàÊèèËø∞Ôºâ listÂíåsetÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πà Êúâ‰∏Ä‰∏™list,ÈáåÈù¢Êúâ20‰∏™user,Ë¶ÅÊ±ÇÊåâÁÖßageÂ≠òÂÇ®ÔºåÊÄé‰πàÂ≠òÂÇ® Êï∞ÊçÆÂ∫ì‰∏≠Â≠òÂÇ®ÔºåÊåâÁÖßclassÂíåsexÁªüËÆ°ÊÄª‰∫∫Êï∞ group by gitÁöÑÂ∑•‰ΩúÂå∫ÔºåÊöÇÂ≠òÂå∫ÂíåËøúÁ®ã‰ªìÂ∫ì Êúâ‰∏§ÊÆµ‰ª£Á†ÅÈáçÂ§çÔºåÊåâÁÖßÈòøÈáåËßÑÁ∫¶ÊÄé‰πàÂÜô ‰∫åÂèâÊ†ëÔºåÂ±ÇÂ∫èÈÅçÂéÜÂÜôÂá∫ ÂºïÁî≥Ôºö Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÂíåÂéüÁêÜ‰∏ÄÂÆöË¶ÅÊêûÊ∏ÖÊ•öÔºàÂº±È°πÔºâ ‰∫åÂèâÊ†ëÂá†‰∏™ÈÅçÂéÜ javaÈõÜÂêàÂÜçÊÄªÁªì‰∏ÄÈÅç Á™ÅÂá∫‰∫ÆÁÇπÔºåËÆ©‰∫∫ÊÑüËßâÊúâÁâπÁÇπ]]></content>
  </entry>
</search>
